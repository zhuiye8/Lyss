# API错误码字典

本文档提供了系统中所有API错误码及其对应的描述信息，方便开发人员在开发和调试过程中查阅。

## 通用成功码

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 200   | 操作成功 | 200 |
| 201   | 创建成功 | 201 |
| 202   | 请求已接受 | 202 |
| 204   | 无内容 | 204 |

## 通用错误码 (400系列)

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 400000 | 请求参数错误 | 400 |
| 400001 | 无效的参数 | 400 |
| 400002 | 缺少必要参数 | 400 |
| 400003 | 参数格式错误 | 400 |
| 400004 | 重复的请求 | 400 |
| 400005 | 参数过多 | 400 |
| 400006 | 请求体过大 | 400 |

## 通用错误码 (401系列)

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 401000 | 未认证或认证已过期 | 401 |
| 401001 | 无效的令牌 | 401 |
| 401002 | 令牌已过期 | 401 |
| 401003 | 无效的凭证 | 401 |
| 401004 | 需要多因素认证 | 401 |

## 通用错误码 (403系列)

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 403000 | 权限不足 | 403 |
| 403001 | 禁止访问资源 | 403 |
| 403002 | 禁止的操作 | 403 |
| 403003 | 请求频率超限 | 403 |
| 403004 | IP地址被禁止 | 403 |
| 403005 | 账号已禁用 | 403 |

## 通用错误码 (404系列)

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 404000 | 资源不存在 | 404 |
| 404001 | 用户不存在 | 404 |
| 404002 | 其他资源不存在 | 404 |
| 404003 | 接口不存在 | 404 |

## 通用错误码 (429系列)

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 429000 | 请求过于频繁 | 429 |
| 429001 | 配额已用尽 | 429 |

## 通用错误码 (500系列)

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 500000 | 内部服务器错误 | 500 |
| 500001 | 服务不可用 | 500 |
| 500002 | 数据库错误 | 500 |
| 500003 | 外部服务错误 | 500 |
| 500004 | 网络错误 | 500 |
| 500005 | 配置错误 | 500 |
| 500999 | 未知错误 | 500 |

## 业务错误码 (600系列) - 用户模块

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 600001 | 用户已存在 | 400 |
| 600002 | 用户创建失败 | 500 |
| 600003 | 用户更新失败 | 500 |
| 600004 | 用户删除失败 | 500 |
| 600005 | 密码错误 | 400 |
| 600006 | 密码强度不足 | 400 |
| 600007 | 邮箱已存在 | 400 |
| 600008 | 手机号已存在 | 400 |
| 600009 | 用户未激活 | 403 |

## 业务错误码 (601系列) - 认证模块

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 601001 | 登录失败 | 401 |
| 601002 | 注册失败 | 500 |
| 601003 | 令牌创建失败 | 500 |
| 601004 | 登录尝试次数过多 | 429 |
| 601005 | 验证失败 | 400 |

## 业务错误码 (602系列) - 智能体模块

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 602001 | 智能体不存在 | 404 |
| 602002 | 智能体创建失败 | 500 |
| 602003 | 智能体更新失败 | 500 |
| 602004 | 智能体删除失败 | 500 |
| 602005 | 智能体查询失败 | 500 |
| 602006 | 智能体运行失败 | 500 |
| 602007 | 无效的智能体配置 | 400 |

## 业务错误码 (603系列) - 对话模块

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 603001 | 对话不存在 | 404 |
| 603002 | 对话创建失败 | 500 |
| 603003 | 对话更新失败 | 500 |
| 603004 | 对话删除失败 | 500 |
| 603005 | 消息发送失败 | 500 |
| 603006 | 无效的消息格式 | 400 |

## 业务错误码 (604系列) - 知识库模块

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 604001 | 知识库不存在 | 404 |
| 604002 | 知识库创建失败 | 500 |
| 604003 | 知识库更新失败 | 500 |
| 604004 | 知识库删除失败 | 500 |
| 604005 | 文档上传失败 | 500 |
| 604006 | 文档处理失败 | 500 |
| 604007 | 文档删除失败 | 500 |
| 604008 | 文档不存在 | 404 |
| 604009 | 查询失败 | 500 |

## 业务错误码 (605系列) - 模型模块

| 错误码 | 描述 | HTTP状态码 |
|-------|------|-----------|
| 605001 | 模型不存在 | 404 |
| 605002 | 模型创建失败 | 500 |
| 605003 | 模型更新失败 | 500 |
| 605004 | 模型删除失败 | 500 |
| 605005 | 模型连接失败 | 500 |
| 605006 | 模型配额超限 | 429 |
| 605007 | 无效的模型配置 | 400 |

## 错误响应示例

```json
{
  "success": false,
  "code": "401001",
  "message": "无效的令牌",
  "requestId": "7d66ae12-a1b2-c3d4-e5f6-g7h8i9j0k1l2",
  "data": null,
  "timestamp": 1682956800000
}
```

## 如何使用错误码

### 后端使用示例

```go
// 导入错误码包
import "server/pkg/errorcode"
import "server/pkg/response"

// 在控制器中使用
func (h *Handler) GetUser(c *gin.Context) {
    user, err := h.service.GetUserByID(id)
    if err != nil {
        if errors.Is(err, sql.ErrNoRows) {
            // 返回用户不存在错误
            response.Fail(c, errorcode.UserNotFound, errorcode.ErrorMessages[errorcode.UserNotFound])
            return
        }
        // 返回内部服务器错误
        response.Fail(c, errorcode.InternalError, errorcode.ErrorMessages[errorcode.InternalError])
        return
    }
    
    // 返回成功响应
    response.Success(c, user)
}
```

### 前端处理示例

```typescript
import api from './api';

// 获取用户信息
const getUserInfo = async (userId: string) => {
  try {
    const response = await api.get(`/users/${userId}`);
    return response.data;
  } catch (error) {
    // 处理特定错误码
    if (error.code === '404001') {
      console.error('用户不存在');
      // 执行特定操作...
    } else if (error.code === '401001') {
      console.error('无效的令牌');
      // 跳转到登录页...
    } else {
      console.error('获取用户信息失败:', error.message);
    }
    throw error;
  }
}
``` 